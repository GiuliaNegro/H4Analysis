<draw>
plots 
saveAs png pdf root
outDir ~/www/TB2017/H4Analysis/10027
plugins 'rootlogon.C' 'FuriousPlotter/macros/FPCanvasStyle.C'
</draw>

importCfg /afs/cern.ch/user/g/gnegro/work/H4Analysis/H4Analysis/cfg/VFE_adapter_dqm2.cfg

src2017 /eos/cms/store/group/dpg_ecal/comm_ecal/upgrade/testbeam/ECALTB_H4_Oct2017/data/raw/ntuples/10027/10.root h4



for ch DigiRecoVFE.channelsNames
<amplitude_spectrum_$ch>
histos h
<h>
src+= src2017
var 'amp_max[$ch]'
cut 'fabs(X[0]+Y[0])<50'
bins 500 0 5000
customize 'SetTitle(";Amplitude (ADC);Events")' 'SetAxisRange(0, 5000, "X")' 'SetFillColor(kYellow)' 
drawOptions hist
</h>
</amplitude_spectrum_$ch>

<time_max_$ch= amplitude_spectrum_$ch>
h.var 'time_max[$ch]'
h.bins 400 0 1000
h.customize 'SetTitle(";time_max (ns); Events")' 'SetAxisRange(0, 1000, "X")' 'SetFillColor(kAzure-3)'
</time_max_$ch>

<noise_spectrum_$ch= amplitude_spectrum_$ch>
h.var 'b_rms[$ch]'
h.bins 100 0 35
h.customize 'SetTitle(";Noise (ADC); Events")' 'SetAxisRange(0, 35, "X")' 'SetFillColor(kCyan+2)'
</noise_spectrum_$ch>

<b_slope_$ch= amplitude_spectrum_$ch>
h.var 'b_slope[$ch]'
h.bins 100 -25 25
h.customize 'SetTitle(";b_slope; Events")' 'SetFillColor(kCyan+1)'
</b_slope_$ch>

<amplitude_map_$ch= amplitude_spectrum_$ch>
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
h.var 'amp_max[$ch]:Y[0]:X[0]'
h.bins 20 -20 20 20 -20 20 0 16000 
h.customize 'SetTitle(";X (mm);Y (mm); Amplitude (ADC)")' 'SetContour(10000)' 
#'SetAxisRange(0, 16000, "Z")'
h.drawOptions COLZ
</amplitude_map_$ch>

draw.plots+= amplitude_spectrum_$ch time_max_$ch noise_spectrum_$ch b_slope_$ch amplitude_map_$ch 
end



channels VFE8_0 VFE8_1 VFE8_2 VFE8_3 VFE8_4 
for ch channels
<WF_spectrum_$ch>
histos histo
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
<histo>
src+= src2017
var 'WF_val:WF_time'
cut 'WF_ch==$ch'
bins 1000 0 1000 4000 0 4000
customize 'SetTitle(";Time (ns);Amplitude (ADC)")' 
drawOptions COLZ
</histo>
</WF_spectrum_$ch>
draw.plots+= WF_spectrum_$ch
end


channels MCP1 MCP2 clock trig
for ch channels
<WF_spectrum_$ch>
histos histo
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
<histo>
src+= src2017
var 'WF_val:WF_time'
cut 'WF_ch==$ch'
bins 200 0 200 4000 0 4000
customize 'SetTitle(";Time (ns);Amplitude (ADC)")' 
drawOptions COLZ
</histo>
</WF_spectrum_$ch>
draw.plots+= WF_spectrum_$ch
end



for i 0 2
<hodoscope_X_$i>
histos hist
<hist>
src+= src2017
var 'X[$i-1]'
bins 40 -20 20
customize 'SetTitle(";X (mm)")' 'SetFillColor(kTeal-8)' 
drawOptions hist
</hist>
</hodoscope_X_$i>

<hodoscope_Y_$i= hodoscope_X_$i>
hist.var 'Y[$i-1]'
hist.customize 'SetTitle(";Y (mm)")' 'SetFillColor(kTeal-7)'
</hodoscope_Y_$i>

<hodoscope_map_$i= hodoscope_X_$i>
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
hist.var 'Y[0]:X[0]'
hist.bins 20 -20 20 20 -20 20
hist.customize 'SetTitle(";X (mm);Y (mm)")' 
hist.drawOptions COLZ
</hodoscope_map_$i>

draw.plots+= hodoscope_X_$i hodoscope_Y_$i hodoscope_map_$i
end


