<draw>
saveAs png pdf root
plugins 'gStyle->SetOptStat(0)' 'gStyle->SetPalette(kDeepSea)' 'FPCanvasStyle.C'
outDir ~/eos/user/s/spigazzi/www/ECAL/Upgrade/TB_June2018/alignment/
</draw>

crystal.names A1 A2 A3 \
              B1 B2 B3 B4 B5 \
              C1 C2 C3 C4 C5 \
              D1 D2 D3 D4 D5 \
              E1 E2 E3

run.numbers 11293 11292 11291 11277 11276 11275 11278 11279 11268 11267 11272 11270 11271 11286 11285 11282 11281 11280 11287 11288 11290

file.base /eos/cms/store/group/dpg_ecal/comm_ecal/upgrade/testbeam/ECALTB_H4_June2018/ntuples_alignment_runs_v1/ECAL_H4_June2018_

for i 0 21
#---XY maps
<amplitude_$crystal.names[$i]_vs_XY>
customize 'macro:FPCanvasStyle(this, "$crystal.names[$i]", "", 0, "", 1, 1)' 
histos map
<map>
        src '$file.base[0]$run.numbers[$i].root' 'h4'
        var 'amp_max[$crystal.names[$i]]:Y[0]:X[0]'
        cut 'nFibresOnX[0]==2 && nFibresOnY[0]==2 && amp_max[$crystal.names[$i]]>200'
        bins 25 -25 25 25 -25 25 0 10000
        customize 'SetTitle(";X (mm); Y (mm); Amplitude (ADC count)")' 'SetAxisRange(0, 2000, "Z")'
        drawOptions COLZ
</map>
</amplitude_$crystal.names[$i]_vs_XY>

#---1D profile X
<amplitude_$crystal.names[$i]_vs_X>
customize 'macro:FPCanvasStyle(this, "$crystal.names[$i]", "", 0, "", 1)' 
histos h
<h>
        src '$file.base[0]$run.numbers[$i].root' 'h4'
        var 'amp_max[$crystal.names[$i]]:X[0]'
        cut 'nFibresOnX[0]==2 && nFibresOnY[0]==2 && amp_max[$crystal.names[$i]]>200'
        bins 50 -25 25 0 10000
        customize 'SetTitle(";X (mm); Amplitude (ADC count)")' 'SetAxisRange(0, 2000, "Y")'
        drawOptions COLZ
</h>
</amplitude_$crystal.names[$i]_vs_X>

#---1D profile Y
<amplitude_$crystal.names[$i]_vs_Y>
customize 'macro:FPCanvasStyle(this, "$crystal.names[$i]", "", 0, "", 1)' 
histos h
<h>
        src '$file.base[0]$run.numbers[$i].root' 'h4'
        var 'amp_max[$crystal.names[$i]]:Y[0]'
        cut 'nFibresOnX[0]==2 && nFibresOnY[0]==2 && amp_max[$crystal.names[$i]]>200'
        bins 50 -25 25 0 10000
        customize 'SetTitle(";Y (mm); Amplitude (ADC count)")' 'SetAxisRange(0, 2000, "Y")'
        drawOptions COLZ
</h>
</amplitude_$crystal.names[$i]_vs_Y>

draw.plots+= amplitude_$crystal.names[$i]_vs_XY amplitude_$crystal.names[$i]_vs_X amplitude_$crystal.names[$i]_vs_Y

end
