<draw>
plots 
saveAs png pdf root
outDir ~/www/TBJune2018_H4Analysis/hodo/11433
plugins 'rootlogon.C' 'FuriousPlotter/macros/FPCanvasStyle.C'
</draw>

src2018 ~/work/ECAL_TB/H4Analysis/ntuples/ECAL_H4_June2018_11433.root h4

VFEs C3 
digitizer MCP1 MCP2 CLK TRG 




### HODOSCOPE ##########
for i 0 2

<hodoscope_X_$i>
histos hist
<hist>
src+= src2018
var 'X[$i-1]'
bins 50 -25 25
customize 'SetTitle(";X (mm); Events")' 'SetFillColor(kTeal-8)' 
drawOptions hist
</hist>
</hodoscope_X_$i>

<hodoscope_Y_$i= hodoscope_X_$i>
hist.var 'Y[$i-1]'
hist.customize 'SetTitle(";Y (mm); Events")' 'SetFillColor(kTeal-7)'
</hodoscope_Y_$i>

<hodoscope_map_$i= hodoscope_X_$i>
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
hist.var 'Y[0]:X[0]'
hist.bins 50 -25. 25. 50 -25. 25.
hist.customize 'SetTitle(";X (mm);Y (mm)")' 
hist.drawOptions COLZ
</hodoscope_map_$i>

<nFibresOnX_$i= hodoscope_X_$i>
hist.var 'nFibresOnX[$i-1]'
hist.customize 'SetTitle(";nFibresOnX; Events")' 'SetFillColor(kTeal-8)'
</nFibresOnX_$i>

<nFibresOnY_$i= hodoscope_X_$i>
hist.var 'nFibresOnY[$i-1]'
hist.customize 'SetTitle(";nFibresOnY; Events")' 'SetFillColor(kTeal-7)'
</nFibresOnY_$i>

draw.plots+= hodoscope_X_$i hodoscope_Y_$i hodoscope_map_$i nFibresOnX_$i nFibresOnY_$i

end
########################




### t0 MCP, CLK, TRG ###
channels MCP1 MCP2 TRG
for ch channels
<t0_$ch>
histos h
<h>
src+= src2018
var 't0[$ch]'
cut 'amp_max[C3]>50 && maximum[MCP1]>40'
bins 500 0 1000
customize 'SetTitle(";t0 (ns); Events")' 'SetAxisRange(0, 200, "X")' 'SetFillColor(kBlue-2)'
drawOptions hist
</h>
</t0_$ch>
draw.plots+= t0_$ch
end

<t0_CLK> 
histos h
<h>
src+= src2018
var 'phase[CLK]'
cut 'amp_max[C3]>50 && maximum[MCP1]>40'
bins 100 -5 15
customize 'SetTitle(";t0 (ns); Events")' 'SetFillColor(kBlue-2)'
drawOptions hist
</h>
</t0_CLK>

<period_CLK> 
histos h
<h>
src+= src2018
var 'period[CLK]'
cut 'amp_max[C3]>50 && maximum[MCP1]>40'
bins 200 6.22 6.26
#bins 200 8.30 8.34
customize 'SetTitle(";period (ns); Events")' 'SetFillColor(kBlue-2)'
drawOptions hist
</h>
</period_CLK>

draw.plots+= t0_CLK period_CLK
########################




### AMP, TIME digitizer###
digitizer MCP1 MCP2
for ch digitizer

<amp_maximum_$ch>
histos h
<h>
src+= src2018
var 'maximum[$ch]'
cut 'amp_max[C3]>50 && maximum[MCP1]>40'
bins 500 0 5000
customize 'SetTitle(";amp_maximum (ADC);Events")' 'SetFillColor(kYellow+1)'
drawOptions hist
</h>
</amp_maximum_$ch>

<time_maximum_$ch= amp_maximum_$ch>
h.var 'time_maximum[$ch]'
h.bins 200 0 200
h.customize+= 'SetTitle(";time_maximum (ns); Events")' 'SetFillColor(kAzure+1)'
</time_maximum_$ch>

draw.plots+= amp_maximum_$ch time_maximum_$ch
end
########################




### AMP, TIME, NOISE VFEs###
for ch VFEs

<amp_max_$ch>
histos h
<h>
src+= src2018
var 'amp_max[$ch]'
cut 'amp_max[C3]>50 && maximum[MCP1]>40'
bins 800 0 8000
customize 'SetTitle(";amp_max (ADC);Events")' 'SetFillColor(kYellow)'
drawOptions hist
</h>
</amp_max_$ch>

<time_max_$ch= amp_max_$ch>
h.var 'time_max[$ch]'
h.bins 400 0 1000
h.customize 'SetTitle(";time_max (ns); Events")' 'SetFillColor(kAzure-3)'
</time_max_$ch>

<amp_maximum_$ch= amp_max_$ch>
h.var 'maximum[$ch]'
h.customize+= 'SetTitle(";amp_maximum (ADC); Events")' 'SetFillColor(kYellow+1)'
</amp_maximum_$ch>

<time_maximum_$ch= time_max_$ch>
h.var 'time_maximum[$ch]'
h.customize+= 'SetTitle(";time_maximum (ns); Events")' 'SetFillColor(kAzure+1)'
</time_maximum_$ch>

<noise_spectrum_$ch= amp_max_$ch>
h.var 'b_rms[$ch]'
h.bins 100 0 35
h.customize 'SetTitle(";Noise (ADC); Events")' 'SetFillColor(kCyan+2)'
</noise_spectrum_$ch>

<b_slope_$ch= amp_max_$ch>
h.var 'b_slope[$ch]'
h.bins 100 -25 25
h.customize 'SetTitle(";b_slope; Events")' 'SetFillColor(kCyan+1)'
</b_slope_$ch>

<charge_tot_$ch_norm= amp_max_$ch>
h.var 'charge_tot[$ch]/amp_max[$ch]'
h.bins 100 0 50
h.customize 'SetTitle(";charge_tot/amp_max; Events")' 'SetFillColor(kRed)'
</charge_tot_$ch_norm>

draw.plots+= amp_max_$ch time_max_$ch amp_maximum_$ch time_maximum_$ch noise_spectrum_$ch b_slope_$ch charge_tot_$ch_norm

end
########################




### AMP MAP ########
channels= VFEs
channels+= MCP1 MCP2 CLK TRG
for ch channels

<amplitude_map_$ch>
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
histos h
<h>
src+= src2018
var 'amp_max[$ch]:Y[0]:X[0]'
bins 50 -25 25 25 -25 25 0 16000 
customize 'SetTitle(";X (mm);Y (mm); amp_max (ADC)")' 'SetContour(10000)' 
#'SetAxisRange(0, 16000, "Z")'
drawOptions COLZ
</h>
</amplitude_map_$ch>

draw.plots+= amplitude_map_$ch
end
########################




### AMP VS TIME ########
for ch VFEs
<WF_spectrum_$ch>
histos histo
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
<histo>
src+= src2018
var 'WF_val:WF_time'
cut 'WF_ch==$ch'
bins 1000 0 1000 81000 -100 8000
customize 'SetTitle(";Time (ns);Amplitude (ADC)")' 
drawOptions COLZ
</histo>
</WF_spectrum_$ch>
draw.plots+= WF_spectrum_$ch
end

digitizer MCP1 MCP2 CLK TRG 
for ch digitizer
<WF_spectrum_$ch>
histos histo
customize 'macro:FPCanvasStyle(this, "", "", 1, "", 1, 1)' 
<histo>
src+= src2018
var 'WF_val:WF_time'
cut 'WF_ch==$ch'
bins 200 0 200 4100 -100 4000
customize 'SetTitle(";Time (ns);Amplitude (ADC)")' 
drawOptions COLZ
</histo>
</WF_spectrum_$ch>
draw.plots+= WF_spectrum_$ch
end
########################

